<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="Ever wonder if there are ways to be more efficient in our terminal and shell? Feeling a little clunky? Here are a few good-to-knows for those of us that have never dabbled in sys-admin or dev-ops work
 problem : Do I have to push up (arrow) multiple times to find a previous command that I need to run? What if I just want to run the last command again?" />
<meta name="keywords" content=", bash, efficiency, shell, terminal, zsh" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://wulymammoth.github.io/posts/shell-shock/" />


    <title>
        
            Shell Shock :: wulymammoth  — tolle fuga ad astra 🚀 ✨
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.0ab972d4569b6598a89bf6b801e361c382fcbc20e46ec4a83e1a97ba76106035.css">






<meta itemprop="name" content="Shell Shock">
<meta itemprop="description" content="Ever wonder if there are ways to be more efficient in our terminal and shell? Feeling a little clunky? Here are a few good-to-knows for those of us that have never dabbled in sys-admin or dev-ops work
 problem : Do I have to push up (arrow) multiple times to find a previous command that I need to run? What if I just want to run the last command again?">
<meta itemprop="datePublished" content="2020-07-06T09:27:11-07:00" />
<meta itemprop="dateModified" content="2020-07-06T09:27:11-07:00" />
<meta itemprop="wordCount" content="1051">
<meta itemprop="image" content="https://wulymammoth.github.io/"/>



<meta itemprop="keywords" content="bash,efficiency,shell,terminal,zsh," />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://wulymammoth.github.io/"/>

<meta name="twitter:title" content="Shell Shock"/>
<meta name="twitter:description" content="Ever wonder if there are ways to be more efficient in our terminal and shell? Feeling a little clunky? Here are a few good-to-knows for those of us that have never dabbled in sys-admin or dev-ops work
 problem : Do I have to push up (arrow) multiple times to find a previous command that I need to run? What if I just want to run the last command again?"/>



    <meta property="og:title" content="Shell Shock" />
<meta property="og:description" content="Ever wonder if there are ways to be more efficient in our terminal and shell? Feeling a little clunky? Here are a few good-to-knows for those of us that have never dabbled in sys-admin or dev-ops work
 problem : Do I have to push up (arrow) multiple times to find a previous command that I need to run? What if I just want to run the last command again?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wulymammoth.github.io/posts/shell-shock/" />
<meta property="og:image" content="https://wulymammoth.github.io/"/>
<meta property="article:published_time" content="2020-07-06T09:27:11-07:00" />
<meta property="article:modified_time" content="2020-07-06T09:27:11-07:00" /><meta property="og:site_name" content="wulymammoth" />






    <meta property="article:published_time" content="2020-07-06 09:27:11 -0700 PDT" />








    </head>

    <body class="">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">cat friends.txt | awk &#39;{ print &#34;hello &#34; $1 }&#39;</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://wulymammoth.github.io/posts">Blog</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>5 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="https://wulymammoth.github.io/posts/shell-shock/">Shell Shock</a>
            </h1>

            <div class="post-info">
                    <p>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://wulymammoth.github.io/tags/bash">bash</a></span><span class="tag"><a href="https://wulymammoth.github.io/tags/efficiency">efficiency</a></span><span class="tag"><a href="https://wulymammoth.github.io/tags/shell">shell</a></span><span class="tag"><a href="https://wulymammoth.github.io/tags/terminal">terminal</a></span><span class="tag"><a href="https://wulymammoth.github.io/tags/zsh">zsh</a></span>
                    </p>

                <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>1051 Words</p>

                <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2020-07-06 09:27 -0700</p>
            </div>

            <hr />

            

            <div class="post-content">
                <p>Ever wonder if there are ways to be more efficient in our terminal and shell? Feeling a little clunky? Here are a few good-to-knows for those of us that have never dabbled in sys-admin or dev-ops work</p>
<hr>
<p><strong>problem</strong> : Do I have to push up (arrow) multiple times to find a previous command that I need to run? What if I just want to run the last command again?</p>
<p><strong>solution</strong> : Please, for the love of anything, stop (pressing up multiple times and eyeballing)! This is ridiculously inefficient! Three things!</p>
<p><strong>&ndash; FIRST &ndash;</strong>  To simply run the previous command without moving off our keyboard&rsquo;s home row: <code>ctrl-p</code> (mnemonic for &ldquo;previous&rdquo;) followed by the <code>&lt;Enter&gt;</code> key. Went past our command? <code>ctrl-n</code> (mnemonic for &ldquo;next&rdquo;).</p>
<p><strong>&ndash; SECOND &ndash;</strong> If we know it&rsquo;s not the last command, the following is probably the utility that I rely on most: <code>reverse-i-search</code>. This utility treats our (command) <code>history</code> like a stack and (fuzzy) finds the most recent match for any term/keyword that exists in our history. To initialize it, hit <code>ctrl-r</code>. Once we&rsquo;ve typed something it should arrive at our first match. If the first match isn&rsquo;t what we&rsquo;re looking for, then hit <code>ctrl-r</code> again and it&rsquo;ll go to the next previous match. And if we&rsquo;ve gone past it, use <code>ctrl-s</code>/<code>&lt;Shift&gt;-ctrl-r</code> (depending on our operating system). To exit the search, use <code>ctrl-g</code>. This has almost completely eliminated all my use of aliases.</p>
<p>Let&rsquo;s say that our history looks like this. NOTE: the numbers on the left correspond to the line number in my bash history</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ history
<span style="color:#ae81ff">2311</span>  ls -l
<span style="color:#ae81ff">2312</span>  rg --files | fzf
<span style="color:#ae81ff">2313</span>  vim reverse_singly_linked_list.py
<span style="color:#ae81ff">2314</span>  python -m unittest reverse_singly_linked_list.py
<span style="color:#ae81ff">2315</span>  ping google.com
<span style="color:#ae81ff">2317</span>  mix routes
<span style="color:#ae81ff">2318</span>  mix phx.routes
<span style="color:#ae81ff">2319</span>  git branch
<span style="color:#ae81ff">2320</span>  git log -3 --reverse
<span style="color:#ae81ff">2322</span>  htop
<span style="color:#ae81ff">2326</span>  jobs
<span style="color:#ae81ff">2327</span>  git status
<span style="color:#ae81ff">2328</span>  git diff -w
<span style="color:#ae81ff">2329</span>  ./deploy.sh
<span style="color:#ae81ff">2330</span>  less README.md
<span style="color:#ae81ff">2331</span>  man awk
</code></pre></div><p>Now, I&rsquo;m at my prompt and I&rsquo;m searching for the last command that contained the following characters: <code>test</code>. If we eyeball above, we&rsquo;ll notice that it&rsquo;s command number <code>2314</code> that corresponds with a unit test that I ran with Python for a linked list. What most people do is press up twelve, I repeat, TWELVE, times! When hitting <code>ctrl-r</code>, followed by entering the characters, <code>test</code>, will find that command in its entirety. We can just hit <code>&lt;Enter&gt;</code> to invoke (run) it</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">                     👇 <span style="color:#75715e"># what we type will display here</span>
$ <span style="color:#f92672">(</span>reverse-i-search<span style="color:#f92672">)</span><span style="color:#e6db74">`</span>test<span style="color:#960050;background-color:#1e0010">&#39;</span>: python -m unittest reverse_singly_linked_list.py
                                          👆 <span style="color:#75715e"># match begins here</span>
</code></pre></div><p><strong>&ndash; LASTLY (third) &ndash;</strong> we can &ldquo;pipe&rdquo; our <code>history</code> into <code>grep</code> (without the angle brackets). This will pull up ALL matches of a command that contains the given term. This is useful if we can only remember some fragments of a command AND to avoid having to hit <code>ctrl-r</code> many times when there are multiple matches.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ history | grep &lt;term/keyword<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>&gt;
</code></pre></div><hr>
<p><strong>problem</strong> : What are the options for this thing? (some Unix utility) Do I have to go to Google every time?</p>
<p><strong>solution</strong> : built-in Unix utilities (i.e. <code>ls</code>, <code>cd</code>, <code>rm</code>, <code>xargs</code>, <code>ps</code>) typically have many <strong>options</strong>. One of the quickest references available is the <strong>manual</strong>, also known as man-pages, that can simply be invoked with <code>$ man &lt;utility&gt;</code>, (e.g. <code>$ man ls</code>). I&rsquo;ve found <code>ls -l</code> (long format), <code>ls -la</code> (long with directories), and <code>ls -lt</code> (long ordered by time) to be particularly useful.</p>
<hr>
<p><strong>problem</strong> : Okay, so I&rsquo;m now using man-pages, but how do I navigate this thing or find what I&rsquo;m searching for? This thing is massive!</p>
<p><strong>solution</strong> : man-pages typically adopt <a href="https://en.wikipedia.org/wiki/Vi">vi</a> movements (popular text editor found on almost all Unix/Linux-based machines including macOS). They can simply be searched by first hitting the <code>/</code> (forward slash) to initiate a search, followed by some keyword or option (e.g. <code>/foobar</code> or <code>/-a</code>) will search for <code>foobar</code> or <code>-a</code> within the page.</p>
<hr>
<p><strong>problem</strong> : Okay, so that search only takes me to the first matching instance. How do I find the <strong>next</strong> one? Or go back to the <strong>previous</strong> one?</p>
<p><strong>solution</strong> : We can use <code>n</code> (lowercase and mnemonic for &ldquo;next&rdquo;) to go to the next instance, and <code>&lt;Shift&gt;-n</code> (capital) to go back (to the previous instance)</p>
<hr>
<p><strong>problem</strong> : Is there a way to make a new directory and switch into it immediately?</p>
<p><strong>solution</strong> : <code>$ mkdir foo &amp;&amp; cd $_</code>. The last command argument is captured in the <code>_</code> (underscore) variable. To access variables, we use the <code>$</code> prefix</p>
<hr>
<p><strong>problem</strong> : Is there an easier way to switch back and forth between directories?</p>
<p><strong>solution</strong> : Use <code>-</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ pwd
/Users/me/Desktop

$ cd foo
foo $

$ pwd
/Users/me/Desktop/foo

$ cd -
/Users/me/Desktop

$ cd -
/Users/me/Desktop/foo
</code></pre></div><hr>
<p><strong>problem</strong> : How do I move around the text for a command that I&rsquo;ve already typed or edit a previous command? How do I go to the beginning of the line or the end of the line?</p>
<p><strong>solution</strong> : readline shortcuts - allow us to navigate within a line and perform edits. This is a huge efficiency gain. Surprisingly, most of our tools are built with readline, so these typically work in any place that allow us to type text (i.e. Chrome or Firefox address bar, Google Doc, etc) so they are worth learning even outside of a shell</p>
<p><strong>Try these out</strong>. NOTE: on macOS, we must configure the meta keys for the option-key-based commands to work (how-to after the commands below). If we care about ergonomics a common key re-map is changing our caps-lock key to <code>ctrl</code>. This can be done through our system keyboard preferences&rsquo; modifier keys (on macOS):</p>
<pre><code>alt-b / option-b (macOS): move cursor back one word
alt-f / option-f (macOS): move cursor forward one word
ctrl-a: move cursor to the beginning of line
ctrl-b: move cursor backward (←)
ctrl-d: delete a character
ctrl-e: move cursor to the end of line
ctrl-f: move cursor forward (→)
ctrl-k: kill the line after the cursor, add to clipboard
ctrl-n: next line, next command in history (↓)
ctrl-p: previous line, previous command in history (↑)
ctrl-u: kill the line before the cursor, add to clipboard
ctrl-w: delete a word
ctrl-y: undo / paste from the clipboard
</code></pre>
<p><strong>HOW-TO</strong> set up meta keys for forward and backward using option keys in iTerm2 on macOS:</p>
<ol>
<li>Go to Profile &gt; Keys</li>
<li>Load Preset &gt; Natural Text Editing</li>
<li>Switch Left/Right Option from Normal &gt; Esc+</li>
</ol>

            </div>
        </article>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">Read other posts</span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    

                    
                        <span class="button next">
                            <a href="https://wulymammoth.github.io/posts/elixir-pipe-into-assertion/">
                                <span class="button__text">Using the pipe operator in Elixir test assertions with ExUnit</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        
            <div id="comments" class="thin">
                <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "wulymammoth" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span> <a href="https://wulymammoth.github.io/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js" integrity="sha512-3HFukJLJggt3&#43;W2ilNASCu6xibW86pdSMJ6&#43;on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script>



    </body>
</html>
