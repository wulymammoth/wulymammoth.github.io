<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Posts on wulymammoth</title>
        <link>https://wulymammoth.github.io/posts/</link>
        <description>Recent content in Posts on wulymammoth</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <copyright>&lt;a href=&#34;https://creativecommons.org/licenses/by-nc/4.0/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CC BY-NC 4.0&lt;/a&gt;</copyright>
        <lastBuildDate>Mon, 25 May 2020 08:07:47 -0700</lastBuildDate>
        <atom:link href="https://wulymammoth.github.io/posts/index.xml" rel="self" type="application/rss+xml" />
        
        <item>
            <title>Why I Love Elixir (Erlang)</title>
            <link>https://wulymammoth.github.io/posts/why_i_love_elixir/</link>
            <pubDate>Mon, 25 May 2020 08:07:47 -0700</pubDate>
            
            <guid>https://wulymammoth.github.io/posts/why_i_love_elixir/</guid>
            <description>TL;DR   The screenshot is from the following talk by Sa≈°a Juriƒá, the author of Elixir in Action, being the first book that I had ever read on the language when I began. If I could get you to take anything away from this post, it&amp;rsquo;d be the entirety of this video. Watch it! You won&amp;rsquo;t be disappointed as it delivers like no other talk you&amp;rsquo;ve seen &amp;ndash; &amp;ldquo;brutally&amp;rdquo; to the point giving you an idea about what it is like running real systems in production that the BEAM (Erlang VM) provides and that no other platform provides out of the box; not Haskell, not Scala, not Clojure, not OCaml.</description>
            <content type="html"><![CDATA[<h2 id="tldr">TL;DR</h2>
<figure>
    <img src="/media/goto_conf_sasa_juric.png"/> 
</figure>

<p>The screenshot is from the following talk by Sa≈°a Juriƒá, the author of <a href="https://www.manning.com/books/elixir-in-action">Elixir in Action</a>, being the first book that I had ever read on the language when I began. If I could get you to take anything away from this post, it&rsquo;d be the entirety of this video. <strong>Watch it!</strong> You won&rsquo;t be disappointed as it delivers like no other talk you&rsquo;ve seen &ndash; &ldquo;brutally&rdquo; to the point giving you an idea about what it is like running real systems in production that the BEAM (Erlang VM) provides and that no other platform provides out of the box; not Haskell, not Scala, not Clojure, not OCaml. You&rsquo;re going to be coming away with a wishlist of things that you wish that your language or platform had.

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/JvBT4XBdoUE" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>
</p>
<hr>
<h2 id="the-actual-things-that-i-love-language-features">the actual things that I love (language features)</h2>
<p>I&rsquo;ve played with my fair share of programming languages &ndash; MIPS, C, C++, Rust, Golang, Ruby, Python, JavaScript, Java, Kotlin, Scala, Clojure, OCaml, Haskell. I haven&rsquo;t worked with them all in production or deployed them in systems used by others. I also don&rsquo;t claim to have deep knowledge of all of them.</p>
<p>I always tell others that Elixir is a <code>mix</code>ture (pun intended) of some of people&rsquo;s favorite things from some of people&rsquo;s favorite popular programming languages. Below I list the ones that have stood out to me and exclude features from BEAM aka the Erlang virtual machine (VM), because the video in the TL;DR section above fills that in.</p>
<h3 id="1-syntax-from-ruby">1. syntax from Ruby</h3>
<p>If you&rsquo;ve ever worked with Ruby, the syntax will look very familiar to you. I&rsquo;m not a huge fan of <code>end</code> but there&rsquo;s a reason for why it exists</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">defmodule <span style="color:#a6e22e">Foo</span>; end
</code></pre></div><h3 id="2-docstrings-and-doctests-from-python">2. docstrings and doctests from Python</h3>
<p>One of the biggest issues that professional developers have when adding comments to code is this idea known as &ldquo;decaying documentation&rdquo;. It simply implies that oft-forgotten is the update to comments (documentation) when a code change is performed. Python provided a facility called <a href="https://docs.python.org/2/library/doctest.html">doctests</a> to solve this problem &ndash; if a code example is provided in the &ldquo;comment&rdquo; a run of the test suite would reveal a test failure should that example no longer work after the code change.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">defmodule <span style="color:#a6e22e">MyApp.Hello</span> do
  <span style="color:#a6e22e">@moduledoc</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">  This is the Hello module.
</span><span style="color:#e6db74">  &#34;&#34;&#34;</span>
  <span style="color:#a6e22e">@moduledoc</span> <span style="color:#e6db74">since</span>: <span style="color:#e6db74">&#34;1.0.0&#34;</span>

  <span style="color:#a6e22e">@doc</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">  Says hello to the given `name`.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">  Returns `:ok`.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">  </span><span style="color:#960050;background-color:#1e0010">##</span><span style="color:#e6db74"> Examples
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">      iex&gt; MyApp.Hello.world(:john)
</span><span style="color:#e6db74">      :ok
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">  &#34;&#34;&#34;</span>
  <span style="color:#a6e22e">@doc</span> <span style="color:#e6db74">since</span>: <span style="color:#e6db74">&#34;1.3.0&#34;</span>
  def world(name) do
    <span style="color:#a6e22e">IO</span><span style="color:#f92672">.</span>puts(<span style="color:#e6db74">&#34;hello </span><span style="color:#e6db74">#{</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
  end
end
</code></pre></div><h3 id="3-comprehensions-from-python">3. comprehensions from Python</h3>
<p>List comprehensions anyone? I care a lot about the ergonomics of a language and its ability to express declaratively what I want to do. While Python is a language that a lot of people love, I&rsquo;ve a lot of gripes with it, primarily that it promotes procedural code, but list comprehensions is certainly one of my favorite and expressive language features despite what I find to be a clunky <code>functools</code> module that seems like an awkward bolt-on. Guido, Python&rsquo;s creator, himself noted that Python had no intention of providing functional programming facilities &ndash; so needless to say, a bit of a second-class citizen.</p>
<p>Squaring a list of numbers:</p>
<p><strong>Python</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">[n <span style="color:#f92672">*</span> n <span style="color:#66d9ef">for</span> n <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>)]
</code></pre></div><p><strong>Elixir</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">for n <span style="color:#f92672">&lt;-</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>], <span style="color:#e6db74">do</span>: n <span style="color:#f92672">*</span> n
</code></pre></div><h3 id="4-protocols-for-polymorphism-from-clojure">4. protocols for polymorphism from Clojure</h3>
<p>If you&rsquo;re familiar with interfaces (more like Golang than Java) in other languages, this is how it is done in Clojure and Elixir. This facility makes it simple for expanding the use of a behavior (functions, but not to be confused with Erlang/Elixir &ldquo;behaviours&rdquo;) to new types of data or schemas your application may need to adapt to next. But the secondary benefit is that it declares a set of functions anyone contributing to an open-source library written in Elixir can implement without mangling with existing source code (following the open/closed principle from SOLID)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir"><span style="color:#75715e"># protocol definition</span>
defprotocol <span style="color:#a6e22e">Size</span> do
  <span style="color:#a6e22e">@doc</span> <span style="color:#e6db74">&#34;Calculates the size (and not the length!) of a data structure&#34;</span>
  def size(data)
end

<span style="color:#75715e"># protocol implementations</span>
defimpl <span style="color:#a6e22e">Size</span>, <span style="color:#e6db74">for</span>: <span style="color:#a6e22e">BitString</span> do
  def size(string), <span style="color:#e6db74">do</span>: byte_size(string)
end

defimpl <span style="color:#a6e22e">Size</span>, <span style="color:#e6db74">for</span>: <span style="color:#a6e22e">Map</span> do
  def size(map), <span style="color:#e6db74">do</span>: map_size(map)
end

defimpl <span style="color:#a6e22e">Size</span>, <span style="color:#e6db74">for</span>: <span style="color:#a6e22e">Tuple</span> do
  def size(tuple), <span style="color:#e6db74">do</span>: tuple_size(tuple)
end

</code></pre></div><h3 id="5-mix-build-tool-inspired-by-bundler-in-ruby">5. mix (build tool) inspired by Bundler in Ruby</h3>
<p>Tooling in some language ecosystems is nil or a second-class citizen. One thing about the Ruby and Elixir communities are that they treat them as first-class citizens giving you tools that don&rsquo;t get in your way and are just a pleasure to work with. Those of you that have spent any significant time with JavaScript, Ruby, or Rust may be familiar with the name, Yehuda Katz, who served as a major influence and mentor to Jos√© Valim (Elixir&rsquo;s BDFL/creator) when he was a Google Summer of Code participant/mentee &ndash; with both having been Rails core team members. Katz is known for more than Ruby on Rails &ndash; he&rsquo;s the creator of quite a number of well-loved build tools in various ecosystems: Bundler (Ruby), Cargo (Rust), and Yarn (JavaScript). Elixir follows in this spirit by doing the same with Mix.</p>
<h3 id="6-lazy-evaluation-inspired-by-scalaz-in-scala-and-haskell">6. lazy evaluation inspired by Scalaz in Scala and Haskell</h3>
<p>If you&rsquo;re familiar with reducees, iteratees, iterators, generators, or just the idea of lazy evaluation to reduce space complexity or the memory footprint of code that could eagerly load/buffer all data into memory before operating on it, and perhaps doing it all again, and again&hellip; could be expensive, then you are right. Not every language has facilities to avoid this</p>
<p>Multiply the range between <code>[1, 100000]</code> by <code>3</code>, then filter the odds, and sum them up:</p>
<p><strong>Ruby</strong> (eager) - declarative, but expensive</p>
<p>This creates an array of 100,000 elements, maps into a new array of 100K elements, then selects into another array of 100K elements, before summing them.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">(<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">100000</span>)<span style="color:#f92672">.</span>map { <span style="color:#f92672">|</span>n<span style="color:#f92672">|</span> n <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span> }<span style="color:#f92672">.</span>select { <span style="color:#f92672">|</span>n<span style="color:#f92672">|</span> n <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> }<span style="color:#f92672">.</span>sum
</code></pre></div><p><strong>Python</strong> (eager) - imperative and expensive</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">nums <span style="color:#f92672">=</span> []
<span style="color:#66d9ef">for</span> n <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">100001</span>):
  n <span style="color:#f92672">=</span> n <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>
  <span style="color:#66d9ef">if</span> n <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>:
    nums<span style="color:#f92672">.</span>append(n)
</code></pre></div><p><strong>Python 3</strong> (lazy) - declarative and inexpensive</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">[n <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">for</span> n <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">100001</span>) <span style="color:#66d9ef">if</span> n <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>]
</code></pre></div><p><strong>Elixir</strong> (eager versions) - declarative, but expensive</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir"><span style="color:#75715e"># using comprehensions</span>
for n <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">100_000</span>, rem(n <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">do</span>: n <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>

<span style="color:#75715e"># using Enum functions and pipes</span>
import <span style="color:#a6e22e">Enum</span>
<span style="color:#75715e"># the `&amp;` is known as the capture operator,</span>
<span style="color:#75715e"># capturing the argument by its number in an anonymous function,</span>
<span style="color:#75715e"># but one may think of the expression as a lambda</span>
<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">100_000</span>
<span style="color:#f92672">|&gt;</span> map(<span style="color:#f92672">&amp;</span> &amp;1 <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>)
<span style="color:#f92672">|&gt;</span> filter(<span style="color:#f92672">&amp;</span> rem(&amp;1, <span style="color:#ae81ff">2</span>) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>)
<span style="color:#f92672">|&gt;</span> sum()
</code></pre></div><p><strong>Elixir</strong> (lazy version) - declarative AND inexpensive</p>
<p>You may think of it as a &ldquo;pipeline&rdquo; of operations whereby each element is piped from one function to another at the end (when <code>Enum.sum</code>) is invoked, without the creation of intermediate lists like the above example or the Ruby example.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir"><span style="color:#75715e"># Simply replace most references of `Enum` with `Stream`</span>
import <span style="color:#a6e22e">Stream</span>

<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">100_000</span>
<span style="color:#f92672">|&gt;</span> map(<span style="color:#f92672">&amp;</span> &amp;1 <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>)
<span style="color:#f92672">|&gt;</span> filter(<span style="color:#f92672">&amp;</span> rem(&amp;1, <span style="color:#ae81ff">2</span>) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>)
<span style="color:#f92672">|&gt;</span> <span style="color:#a6e22e">Enum</span><span style="color:#f92672">.</span>sum()
</code></pre></div><h3 id="7-streamdata-and-property-based-testing-from-haskell">7. StreamData and property-based testing from Haskell</h3>
<p>For the functional programming and purists hailing from Haskell land, you may be familiar with QuickCheck and property-based testing. The basic premise is that most of us write &ldquo;example-based&rdquo; unit tests whereby the developer is left up to the task of coming up with and are limited to the examples (i.e., corner/edge cases) they&rsquo;re familiar with at the time of authoring some bit of software. Property-based testing is about random data generation that aids with expanding test coverage. Moreover, the developer can assert some guarantees about the code and the properties that it satisfies. It won&rsquo;t cover all possible values that a function can handle, but does help in reducing the number of bugs in deployed software. Haskell&rsquo;s QuickCheck has inspired similar external libraries in the Python, Ruby, and Rust communities that I&rsquo;m familiar with.</p>
<h3 id="8-pipe-operator-from-standard-ml-sml-or-unix">8. pipe operator from standard ML (SML) or Unix</h3>
<p>If you&rsquo;ve ever done <code>cat foo.txt | grep 'bar'</code> from a shell you&rsquo;re familiar with what <code>|&gt;</code> does in Elixir. However, in most programming languages that most of us have spent time in, code looks like this:</p>
<p>Where the ordering of operations happen from inside out&hellip;</p>
<pre><code>foo(bar(baz(new_function(other_function(data)))))
</code></pre><p>Elixir&rsquo;s pipe operator makes the ordering explicit and obvious:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">data
<span style="color:#f92672">|&gt;</span> other_function()
<span style="color:#f92672">|&gt;</span> new_function()
<span style="color:#f92672">|&gt;</span> baz()
<span style="color:#f92672">|&gt;</span> bar()
<span style="color:#f92672">|&gt;</span> foo()

<span style="color:#75715e"># - OR -</span>
data <span style="color:#f92672">|&gt;</span> other_function() <span style="color:#f92672">|&gt;</span> new_function() <span style="color:#f92672">|&gt;</span> baz() <span style="color:#f92672">|&gt;</span> bar() <span style="color:#f92672">|&gt;</span> foo()
</code></pre></div><hr>
<h2 id="my-introduction-to-elixir-background">my introduction to Elixir (background)</h2>
<p>I was first introduced to Elixir back in 2014 when I had met someone that ran a local Elixir meet-up before anyone knew what the language was. This was all before The Phoenix web framework existed. Working mostly on the web and in JavaScript and some NodeJS at the time, I didn&rsquo;t take a gander at all &ndash; very different from my approach and intrigue with programming languages now.</p>
<p>However, back in 2016, I began to hear murmurs of Elixir at the company that I was employed with. I had a CTO that was always somewhat enamored with the shiny new thing. He and our principal engineer (that had some Erlang experience) test-drove Elixir in production with an inventory service that aided our warehouse ops &ndash; this company used real physical storage for storing all its products. It went successfully, and I was asked if I wanted to give it a whirl on the core products team. I remember thinking, &ldquo;hell yea!&rdquo; This provided me an opportunity to understand what the friend that I had met in 2014 was raving about, but also an opportunity to play with and deploy a truly (albeit not pure) functional language and platform into production.</p>
<p>For the unfamiliar, the Elixir programming language was created by Jos√© Valim, a Rails core team member that ranked as one of the <a href="https://contributors.rubyonrails.org/">top 3 (#6 at the time of this post) contributors</a> of all time. To say that he was prolific is putting it lightly. After attempts at making inroads with concurrency on Rails with mixed success, he discovered Erlang through a tour of languages, by reading a book titled, <a href="https://pragprog.com/book/btlang/seven-languages-in-seven-weeks">Seven Languages in Seven Weeks</a> by Bruce Tate who would eventually author one of the first Elixir books along with <a href="https://pragprog.com/book/phoenix/programming-phoenix">Programming Phoenix</a> along with Chris McCord, the primary author of the popular framework built with Elixir.</p>
<p>I was able to contribute to the majority of two API clients in Elixir - one internal and another open-sourced (external) SDK whose platform didn&rsquo;t have one for such a new language. Both required writing recursive descent parsers, which was really quite fun. My work and production experience with Elixir also heavily involved the use of Phoenix, the web framework, for completely rebuilding one of the core experiences on the e-commerce platform &ndash; the product listings page, and most challenging of all, how to model and traverse a product taxonomy with immutable datatypes to render navigation on the site.</p>
<p>I haven&rsquo;t had a chance to work with Elixir in production in about two years, but have been keeping my ear to the community over that time and have several small projects I work on and run personally outside of building for the web.</p>
]]></content>
        </item>
        
        <item>
            <title>Violating the Law of Demeter</title>
            <link>https://wulymammoth.github.io/posts/law-of-demeter/</link>
            <pubDate>Sat, 23 May 2020 09:44:59 -0700</pubDate>
            
            <guid>https://wulymammoth.github.io/posts/law-of-demeter/</guid>
            <description>A co-worker linked to the following article describing some of JavaScript&amp;rsquo;s new features in 2020 this past week: https://www.freecodecamp.org/news/javascript-new-features-es2020/. One of the features that stood out was optional chaining.
This brings with it something that I&amp;rsquo;ve already seen in other languages that I work with, namely Ruby, and its #try or &amp;amp;. (safe navigation operator). This sort of convenience feature is a double-edged sword:
 good for scripting not so good for any software that is to be extended and or maintained  1.</description>
            <content type="html"><![CDATA[<p>A co-worker linked to the following article describing some of JavaScript&rsquo;s new features in 2020 this past week: <a href="https://www.freecodecamp.org/news/javascript-new-features-es2020/">https://www.freecodecamp.org/news/javascript-new-features-es2020/</a>. One of the features that stood out was <strong>optional chaining</strong>.</p>
<p>This brings with it something that I&rsquo;ve already seen in other languages that I work with, namely Ruby, and its <code>#try</code> or <code>&amp;.</code> (safe navigation operator). This sort of convenience feature is a double-edged sword:</p>
<ol>
<li>good for scripting</li>
<li>not so good for any software that is to be extended and or maintained</li>
</ol>
<h2 id="1-_why-is-it-good-for-scripting_">1. <em>why is it good for scripting?</em></h2>
<p>Instead of the verbosity below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">foo</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">foo</span>.<span style="color:#a6e22e">bar</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">foo</span>.<span style="color:#a6e22e">bar</span>.<span style="color:#a6e22e">baz</span>) <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">foo</span>.<span style="color:#a6e22e">bar</span>.<span style="color:#a6e22e">baz</span>);

<span style="color:#75715e">// -OR- ü§Æ
</span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">foo</span>) {
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">foo</span>.<span style="color:#a6e22e">bar</span>) {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">foo</span>.<span style="color:#a6e22e">bar</span>.<span style="color:#a6e22e">baz</span>) {
      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">foo</span>.<span style="color:#a6e22e">bar</span>.<span style="color:#a6e22e">baz</span>);
    }
  }
}
</code></pre></div><p>We have this. Concise ain&rsquo;t it?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">foo</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">bar</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">baz</span><span style="color:#f92672">?</span>);
</code></pre></div><p>Scripts are typically one-offs and/or throw-away code that likely won&rsquo;t be used again once time moves forward. It isn&rsquo;t always the case, of course. Sometimes we just have to do things that are quick and dirty in scenarios where we are scripting and don&rsquo;t own the content and/or data that we are traversing. Because we aren&rsquo;t the owners, the schema/shape of the data/objects that we want to navigate are opaque to us, therefore subjecting us to defensive programming practices to ensure that we don&rsquo;t have runtime exceptions that halt our script.</p>
<p>That said, the terseness of the new feature makes our script much more readable and removes possible blocks of indentation from conditional logic.</p>
<h2 id="2-_why-isnt-it-so-good-for-any-real-software_">2. <em>why isn&rsquo;t it so good for any real software?</em></h2>
<p><strong>The TL;DR : maintenance or feature extension nightmares from tight-coupling and implicit dependencies</strong></p>
<p>In almost all organizations that I&rsquo;ve been at, the following conversation almost always comes up (back-pressure from the devs on the team):</p>
<blockquote>
<p><em>In order for us to build this feature, we need a sprint to refactor our code, because we weren&rsquo;t aware of this use case</em></p>
</blockquote>
<p>Sometimes we even put the blame on the business and/or product team for NOT having envisioned this in the first place. This is a really poor mindset to have, because at the end of the day &ndash; <strong><em>the only constant in software is change</em></strong>. Some of us may be able to get away with this being a contractor with a single deliverable and pawning off any extension or maintenance to the hapless downstream dev that gets asked to extend it with new features.</p>
<p>This saddens me, because we&rsquo;ve made assumptions about our software that make it too rigid for extension without inducing a refactor and sometimes (hopefully not) a complete re-write.</p>
<p>We should strive to write software that&rsquo;s amenable to change, but this also <em>DOES NOT</em> mean that we try to support every possible use case that we can think of, just flexible enough to not lock us in.</p>
<p>Without digressing too far, let&rsquo;s get back to why something that seems to be a welcome, and maybe even a very nice, addition to the language may get us into trouble&hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UsaAddress</span> {
  <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">street</span>, <span style="color:#a6e22e">state</span>) {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">street</span>  <span style="color:#f92672">=</span> <span style="color:#a6e22e">street</span>;
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">state</span>   <span style="color:#f92672">=</span> <span style="color:#a6e22e">state</span>;
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">country</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;United States of America&#34;</span>;
  }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> {
  <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">address</span>) {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span>    <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">address</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">address</span>;
  }
}

<span style="color:#75715e">/*
</span><span style="color:#75715e">Is the following better? üßê
</span><span style="color:#75715e">
</span><span style="color:#75715e">BEFORE:
</span><span style="color:#75715e">person &amp;&amp; person.address &amp;&amp; person.address.street
</span><span style="color:#75715e">person &amp;&amp; person.address &amp;&amp; person.address.state
</span><span style="color:#75715e">*/</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">printAddress</span>(<span style="color:#a6e22e">person</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>([
    <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">street</span><span style="color:#f92672">?</span>, <span style="color:#75715e">// üëà nicer syntax
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">state</span><span style="color:#f92672">?</span>, <span style="color:#75715e">// üëà with new optional chaining
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span>.<span style="color:#a6e22e">country</span>
  ].<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39;\n&#39;</span>));
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">address</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">UsaAddress</span>(<span style="color:#e6db74">&#39;123 Foo St.&#39;</span>, <span style="color:#e6db74">&#39;New York&#39;</span>);
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">andrea</span>  <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Person</span>(<span style="color:#e6db74">&#39;Andrea&#39;</span>, <span style="color:#a6e22e">address</span>),
<span style="color:#a6e22e">printAddress</span>(<span style="color:#a6e22e">andrea</span>);
</code></pre></div><p>What&rsquo;s wrong here?</p>
<p>Our <code>printAddress</code> function assumes several things about a person:</p>
<ol>
<li>that the person has an address property</li>
<li>that the address has a state property</li>
</ol>
<p>So what?</p>
<blockquote>
<p><em>Hey team! We&rsquo;ve got new business!!! We&rsquo;re going to be supporting Canadian addresses!</em></p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CanadaAddress</span> {
  <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">street</span>, <span style="color:#a6e22e">province</span>, <span style="color:#a6e22e">country</span>) {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">street</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">street</span>;
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">province</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">province</span>; <span style="color:#75715e">// üëà difference
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">country</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Canada&#34;</span>;
  }
}
</code></pre></div><p>What most of us do to support this new use case</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">printAddress</span>(<span style="color:#a6e22e">person</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>([
    <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">street</span><span style="color:#f92672">?</span>,
    <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">state</span><span style="color:#f92672">?</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">province</span><span style="color:#f92672">?</span>, <span style="color:#75715e">// ‚ö†Ô∏è
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span>.<span style="color:#a6e22e">country</span>
  ].<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39;\n&#39;</span>));
}

<span style="color:#75715e">// - OR - ü§Æ
</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">printAddress</span>(<span style="color:#a6e22e">person</span>) {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">state</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span>.<span style="color:#a6e22e">constructor</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;UsaAddress&#39;</span>) {
    <span style="color:#a6e22e">state</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span>.<span style="color:#a6e22e">state</span>;
  } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span>.<span style="color:#a6e22e">constructor</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;CanadianAddress&#39;</span>) {
    <span style="color:#a6e22e">state</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span>.<span style="color:#a6e22e">province</span>;
  } <span style="color:#66d9ef">else</span> {
    <span style="color:#a6e22e">state</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;
  }

  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>([
    <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">street</span><span style="color:#f92672">?</span>,
    <span style="color:#a6e22e">state</span>,
    <span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span>.<span style="color:#a6e22e">country</span>
  ].<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39;\n&#39;</span>));
}
</code></pre></div><p>Guess what happens when we need to support another type of address&hellip;</p>
<blockquote>
<p><em>Easy!! Just add another condition!</em></p>
</blockquote>
<p>Unfortunately, the above is <em>NOT</em> the right answer if we want to maintain extensibility and avoid the possibility of introducing a regression when mangling with existing code.</p>
<p>The <code>printAddress</code> function has dependencies that aren&rsquo;t passed into it:</p>
<ol>
<li>address</li>
<li>the state OR province on an address</li>
</ol>
<p>This function knows about something that is <strong>two degrees of separation</strong> away from itself, and if it changes, which the introduction of Canadian addresses introduces, our <code>printAddress</code> must change, too. This is tight-coupling &ndash; this function must move in lock-step with any address changes. It&rsquo;s rigid. It likely also requires updates to unit tests if there were any to begin with.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">         <span style="color:#960050;background-color:#1e0010">üëá</span> <span style="color:#75715e">// one degree of separation
</span><span style="color:#75715e"></span><span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">state</span><span style="color:#f92672">?</span>
                  <span style="color:#960050;background-color:#1e0010">üëÜ</span> <span style="color:#75715e">// two degrees of separation
</span></code></pre></div><p><strong>NOTE</strong></p>
<ul>
<li>The only thing passed in as an argument to our function is a <strong>person</strong> object</li>
<li>This implies that our function <strong>depends</strong> on having a person for it to operate</li>
<li>BUT it implicitly also says that the person must have an address and its address must have a state or province</li>
</ul>
<hr>
<p>How do we fix this? Follow the <strong>Law of Demeter</strong> which simply states:</p>
<blockquote>
<p><strong><em>Each unit should have only limited knowledge about other units: only units &ldquo;closely&rdquo; related to the current unit.</em></strong></p>
</blockquote>
<blockquote>
<p><strong><em>Each unit should only talk to its friends; don&rsquo;t talk to strangers.</em></strong></p>
</blockquote>
<blockquote>
<p><strong><em>Only talk to your immediate friends.</em></strong></p>
</blockquote>
<p>With the above guidelines, we can interpret it to say, <em>&ldquo;a function should only know about things that are about a degree of separation away&rdquo;</em>.</p>
<p>Ideally, we only go as far as this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">person</span>.<span style="color:#a6e22e">address</span>);
</code></pre></div><p>When we spot <strong>chaining</strong> that goes beyond a degree of separation away from injected dependencies (e.g., <code>person</code>), red flags <em>should</em> be raised.</p>
<p>We&rsquo;ll talk about how to fix this in a follow up post.</p>
<hr>
<h2 id="additional-thoughts">additional thoughts</h2>
<p>I don&rsquo;t really see a much of difference between software developers with years of experience and ones that are new. Some of us are lucky enough to learn it from the job having good mentors, but many of us don&rsquo;t. A genuine curiosity and simply just caring has led me to find solutions to these problems without re-inventing the wheel.</p>
<p>I implore anyone that truly cares about writing maintainable software to check out <a href="https://youtu.be/oytL881p-nQ">&ldquo;Simple Made Easy&rdquo;</a> by Rich Hickey, author of the Clojure programming language and giving oneself the opportunity to understand the principles that make up the acronym that <a href="https://en.wikipedia.org/wiki/SOLID"><strong>SOLID</strong></a> embodies.</p>
]]></content>
        </item>
        
        <item>
            <title>My First Post</title>
            <link>https://wulymammoth.github.io/posts/my-first-post/</link>
            <pubDate>Sat, 23 May 2020 09:14:51 -0700</pubDate>
            
            <guid>https://wulymammoth.github.io/posts/my-first-post/</guid>
            <description>Bringing back my blog, particularly for technical musings, but also as a semi-infrequently updated journal
$ cat friends.txt | awk &amp;#39;{ print &amp;#34;üëã &amp;#34; %1 &amp;#34;!&amp;#34; }&amp;#39; </description>
            <content type="html"><![CDATA[<p>Bringing back my blog, particularly for technical musings, but also as a semi-infrequently updated journal</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat friends.txt | awk <span style="color:#e6db74">&#39;{ print &#34;üëã &#34; %1 &#34;!&#34; }&#39;</span>
</code></pre></div>]]></content>
        </item>
        
    </channel>
</rss>
